"use strict";(globalThis["webpackChunkmontilla"]=globalThis["webpackChunkmontilla"]||[]).push([[335],{7335:(e,o,a)=>{a.r(o),a.d(o,{default:()=>H});var l=a(9835),s=a(6970),r=a(1957);const t={class:"container q-pa-md"},n={class:"col-2"},i={class:"q-pa-md"},d=(0,l._)("div",{class:"text-h6"},"Registro de Colaboradores",-1);function c(e,o,a,c,m,u){const p=(0,l.up)("q-btn"),b=(0,l.up)("q-icon"),g=(0,l.up)("q-input"),h=(0,l.up)("q-td"),w=(0,l.up)("q-toggle"),C=(0,l.up)("q-tr"),f=(0,l.up)("q-table"),k=(0,l.up)("q-card-section"),q=(0,l.up)("q-card-actions"),y=(0,l.up)("q-card"),W=(0,l.up)("q-dialog"),_=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",t,[(0,l._)("div",n,[(0,l.Wm)(p,{color:"primary",onClick:e.registrarColaborador},{default:(0,l.w5)((()=>[(0,l.Uk)("Registrar Colaborador")])),_:1},8,["onClick"])])]),(0,l._)("div",i,[(0,l.Wm)(f,{flat:"",bordered:"",title:"Listado de Colaboradores",rows:e.rows,columns:e.columns,"row-key":"name",filter:e.filter},{"top-right":(0,l.w5)((()=>[(0,l.Wm)(g,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":o[0]||(o[0]=o=>e.filter=o),placeholder:"Search"},{append:(0,l.w5)((()=>[(0,l.Wm)(b,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,l.w5)((o=>[(0,l.Wm)(C,{props:o,onClick:a=>e.onRowClick(o.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{key:"cedula",props:o},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o.row.cedula),1)])),_:2},1032,["props"]),(0,l.Wm)(h,{key:"nombres",props:o},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o.row.nombres),1)])),_:2},1032,["props"]),(0,l.Wm)(h,{key:"celular",props:o},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o.row.celular),1)])),_:2},1032,["props"]),(0,l.Wm)(h,{key:"status",props:o},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(o.row.status),1)])),_:2},1032,["props"]),(0,l.Wm)(h,{key:"cambiarestado",props:o},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{modelValue:o.row.cambiarestado,"onUpdate:modelValue":[e=>o.row.cambiarestado=e,a=>e.cambiarstatus(o.row.id,o.row.cambiarestado)]},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,l.Wm)(h,{key:"restablecer",props:o},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{color:"primary",onClick:a=>e.restablecerpassword(o.row.cedula,o.row.id)},{default:(0,l.w5)((()=>[(0,l.Uk)("Restablecer Contraseña")])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props","onClick"])])),_:1},8,["rows","columns","filter"])]),(0,l.Wm)(W,{modelValue:e.inception,"onUpdate:modelValue":o[4]||(o[4]=o=>e.inception=o)},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,null,{default:(0,l.w5)((()=>[d])),_:1}),(0,l.Wm)(k,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{outlined:"",modelValue:e.cedula,"onUpdate:modelValue":o[1]||(o[1]=o=>e.cedula=o),type:"number",label:"Número de Cédula",class:"q-ma-sm","stack-label":"",dense:e.dense},null,8,["modelValue","dense"]),(0,l.Wm)(g,{outlined:"",modelValue:e.nombres,"onUpdate:modelValue":o[2]||(o[2]=o=>e.nombres=o),label:"Nombres Completos","stack-label":"",class:"q-ma-sm",dense:e.dense},null,8,["modelValue","dense"]),(0,l.Wm)(g,{outlined:"",modelValue:e.celular,"onUpdate:modelValue":o[3]||(o[3]=o=>e.celular=o),type:"number",label:"Celular",class:"q-ma-sm","stack-label":"",dense:e.dense},null,8,["modelValue","dense"])])),_:1}),(0,l.wy)((0,l._)("div",{color:"red"},(0,s.zw)(e.mensajeError),513),[[r.F8,""!=e.mensajeError]]),(0,l.Wm)(q,{align:"right",class:"text-primary"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(p,{flat:"",label:"Cancelar",color:"red",onClick:e.closeRegistroColaboradores},null,8,["onClick"]),[[_]]),(0,l.Wm)(p,{flat:"",label:"Guardar Colaborador",onClick:e.saveRegistroColaboradores},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var m=a(499),u=a(4136),p=a(9302);const b=[{name:"cedula",field:"cedula",required:!0,label:"Cédula",align:"left",sortable:!0},{name:"nombres",align:"center",label:"Nombres",field:"nombres",sortable:!0},{name:"celular",align:"center",label:"Celular",field:"celular",sortable:!0},{name:"cambiarestado",label:"Cambiar Estado",field:"cambiarestado"},{name:"restablecer",label:"Restablecer Contraseña",field:"restablecer"}],g=(0,l.aZ)({name:"ColaboradoresPage",setup(){const e=(0,m.iH)([]),o=(0,p.Z)(),a=(0,m.iH)(!0);return{columns:b,rows:e,filter:(0,m.iH)(""),selected:(0,m.iH)([]),val:a,$q:o,inception:(0,m.iH)(!1),cedula:(0,m.iH)(null),nombres:(0,m.iH)(null),celular:(0,m.iH)(null),mensajeError:(0,m.iH)("")}},methods:{saveRegistroColaboradores(){if(null==this.cedula||""===this.cedula||null==this.nombres||""===this.nombres||null==this.celular||""===this.celular)return void this.$q.notify({message:"Todos los datos son obligatorios",color:"red"});const e={cedula:this.cedula,nombres:this.nombres,celular:this.celular};u.api.post("saveRegistroColaboradores",e).then((e=>{const o=e.data;o.error?this.$q.notify({message:o.message,color:"red"}):(this.$q.notify({message:o.message,color:"green"}),this.getListColaborador(),this.inception=!1,this.closeRegistroColaboradores())})).catch((e=>{this.$q.notify({message:"Error al momento de hacer conexión",color:"red-14"})}))},closeRegistroColaboradores(){this.cedula=null,this.nombres=null,this.celular=null},registrarColaborador(){this.inception=!0},restablecerpassword(e,o){const a={id:o,cedula:e};this.$q.dialog({title:"Restablecer Contraseña",message:"¿Seguro que quiere restablecer la contraseña?",cancel:!0,persistent:!0}).onOk((()=>{u.api.post("restablecerpassword",a).then((e=>{const o=e.data;o.error?this.$q.notify({message:o.message,color:"red"}):this.$q.notify({message:o.message,color:"green"})})).catch((e=>{this.$q.notify({message:"Error al momento de hacer conexión",color:"red-14"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},cambiarstatus(e,o){const a={id:e,status:o?"activo":"inactivo"};console.log(o),console.log(a),u.api.post("changeStatus",a).then((e=>{const o=e.data;o.error?this.$q.notify({message:o.message,color:"red"}):this.$q.notify({message:o.message,color:"green"})})).catch((()=>{this.$q.notify({message:"Error al momento de hacer conexión",color:"red-14"})}))},getListColaborador(){u.api.post("listColaboradores").then((e=>{const o=e.data,a=o.data.colaboradores.results;this.rows=a;const l=this.rows.map((e=>(console.log(e.cambiarestado,1===e.cambiarestado),Object.assign(Object.assign({},e),{cambiarestado:1===e.cambiarestado}))));this.rows=l,console.log(this.rows,"colaboradores")})).catch((()=>{this.$q.notify({message:"Error al momento de hacer conexión",color:"red-14"})}))}},mounted(){this.getListColaborador()}});var h=a(1639),w=a(4455),C=a(7580),f=a(6611),k=a(2857),q=a(3532),y=a(7220),W=a(3175),_=a(2074),V=a(4458),v=a(3190),Z=a(1821),U=a(2146),$=a(9984),Q=a.n($);const R=(0,h.Z)(g,[["render",c]]),H=R;Q()(g,"components",{QBtn:w.Z,QTable:C.Z,QInput:f.Z,QIcon:k.Z,QTr:q.Z,QTd:y.Z,QToggle:W.Z,QDialog:_.Z,QCard:V.Z,QCardSection:v.Z,QCardActions:Z.Z}),Q()(g,"directives",{ClosePopup:U.Z})}}]);