"use strict";(globalThis["webpackChunkmontilla"]=globalThis["webpackChunkmontilla"]||[]).push([[188],{6188:(e,o,a)=>{a.r(o),a.d(o,{default:()=>y});var s=a(9835),n=a(6970);const t={class:"q-ma-lg"},r=(0,s._)("div",{class:"text-h5"}," Publicación Mensajes Masivos por Whatsapp ",-1),l={class:"q-ma-lg"};function i(e,o,a,i,d,c){const m=(0,s.up)("q-btn"),u=(0,s.up)("q-icon"),p=(0,s.up)("q-input"),b=(0,s.up)("q-td"),w=(0,s.up)("q-select"),h=(0,s.up)("q-tr"),f=(0,s.up)("q-table");return(0,s.wg)(),(0,s.iD)("div",t,[r,(0,s._)("div",l,[(0,s.Wm)(m,{label:"Crear un mensaje nuevo",color:"primary",onClick:e.nuevo},null,8,["onClick"])]),(0,s._)("div",null,[(0,s.Wm)(f,{flat:"",bordered:"",title:"Listado de Mensajes Creados",rows:e.rows,columns:e.columns,"row-key":"name",filter:e.filter},{"top-right":(0,s.w5)((()=>[(0,s.Wm)(p,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":o[0]||(o[0]=o=>e.filter=o),placeholder:"Search"},{append:(0,s.w5)((()=>[(0,s.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,s.w5)((o=>[(0,s.Wm)(h,{props:o,onClick:a=>e.onRowClick(o.row)},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{key:"nombre",props:o},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(o.row.nombre),1)])),_:2},1032,["props"]),(0,s.Wm)(b,{key:"fecha",props:o},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(o.row.fecha),1)])),_:2},1032,["props"]),(0,s.Wm)(b,{key:"eventos",props:o},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{filled:"",modelValue:o.row.estado.estado,"onUpdate:modelValue":[e=>o.row.estado.estado=e,a=>e.cambiarevento(o.row.id,o.row.estado.estado.id)],"option-value":"id","option-label":"evento",options:e.options,label:"Seleccione Evento",disable:3===o.row.estado.id||4===o.row.estado.id},null,8,["modelValue","onUpdate:modelValue","options","disable"])])),_:2},1032,["props"])])),_:2},1032,["props","onClick"])])),_:1},8,["rows","columns","filter"])])])}var d=a(499),c=a(9302),m=a(4136);const u=[{name:"nombre",field:"nombre",required:!0,label:"Nombre Identificador",align:"left",sortable:!0},{name:"fecha",align:"center",label:"Fecha Registro",field:"fecha",sortable:!0},{name:"eventos",label:"Estados",field:"eventos",align:"left"}],p=(0,s.aZ)({name:"RegistroPage",setup(){const e=c.Z,o=(0,d.iH)([]),a=(0,d.iH)([]),s=(0,d.iH)(null);return{$q:e,columns:u,rows:o,options:a,evento:s}},mounted(){this.getListMensajes(),this.setEventos()},methods:{cambiarevento(e,o){this.$q.dialog({title:"Cambiar Estado",message:"¿Seguro que quiere el estado de esta publicación?",cancel:!0,persistent:!0}).onOk((()=>{const a={id:e,estado:o};m.api.post("cambiarevento",a).then((e=>{const o=e.data;o.error?this.$q.notify({message:o.message,color:"red"}):this.$q.notify({message:o.message,color:"green"})})).catch((e=>{this.$q.notify({message:"Error al momento de hacer conexión",color:"red-14"})}))})).onOk((()=>{})).onCancel((()=>{window.location.reload()})).onDismiss((()=>{}))},setEventos(){const e=[{id:1,evento:"Corriendo"},{id:2,evento:"Pausado"},{id:3,evento:"Cancelado"}];this.options=e},estado(e){let o="";switch(e){case 0:o="Pendiente";break;case 1:o="Corriendo";break;case 2:o="Pausado";break;case 3:o="Cancelado";break;case 4:o="Finalizado";break}return o},getListMensajes(){m.api.post("getListMensajes").then((e=>{const o=e.data;this.rows=o.data.results;const a=[{numero:0,nombre:"Pendiente"},{numero:1,nombre:"Corriendo"},{numero:2,nombre:"Pausado"},{numero:3,nombre:"Cancelado"},{numero:4,nombre:"Finalizado"}],s=this.rows.map((e=>{const o=a.find((o=>e.estado===o.numero));return Object.assign(Object.assign({},e),{estado:{id:e.estado,estado:o?o.nombre:"Estado Desconocido"}})}));this.rows=s,console.log(this.rows)})).catch((()=>{console.log("ok")}))},nuevo(){window.location.href="#/admin/nuevo"}}});var b=a(1639),w=a(4455),h=a(7580),f=a(6611),g=a(2857),v=a(3532),k=a(7220),q=a(6394),C=a(9984),W=a.n(C);const Z=(0,b.Z)(p,[["render",i]]),y=Z;W()(p,"components",{QBtn:w.Z,QTable:h.Z,QInput:f.Z,QIcon:g.Z,QTr:v.Z,QTd:k.Z,QSelect:q.Z})}}]);