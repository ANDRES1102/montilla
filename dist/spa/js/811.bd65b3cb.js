"use strict";(globalThis["webpackChunkmontilla"]=globalThis["webpackChunkmontilla"]||[]).push([[811],{5811:(e,a,l)=>{l.r(a),l.d(a,{default:()=>C});var o=l(9835),s=l(6970),n=l(1957);const t={class:"q-ma-lg"},d=(0,o._)("div",{class:"text-h5"}," Crear Mensaje ",-1),i={style:{display:"flex","margin-top":"20px"}},r={style:{width:"50%"}},u={style:{width:"50%","margin-left":"20px"}},m={style:{width:"100%",height:"250px","overflow-y":"true","background-color":"#e5e5e5",padding:"8px","border-radius":"5px"}},c=(0,o._)("div",{style:{color:"#383737","font-weight":"bold","margin-bottom":"10px"}},"Muestra del Mensaje",-1);function p(e,a,l,p,g,h){const v=(0,o.up)("q-input"),b=(0,o.up)("q-select"),f=(0,o.up)("q-toggle"),w=(0,o.up)("q-uploader"),y=(0,o.up)("q-btn"),j=(0,o.up)("q-card");return(0,o.wg)(),(0,o.iD)("div",t,[d,(0,o._)("div",i,[(0,o._)("div",r,[(0,o.Wm)(j,{bordered:"",class:"q-pa-lg"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:e.titulo,"onUpdate:modelValue":a[0]||(a[0]=a=>e.titulo=a),filled:"",dense:e.dense,class:"q-ma-md",label:"Titulo (para identifica el mensaje)",type:"text"},null,8,["modelValue","dense"]),(0,o.Wm)(b,{outlined:"",modelValue:e.vereda,"onUpdate:modelValue":a[1]||(a[1]=a=>e.vereda=a),options:e.veredas,"option-value":"id","option-label":"nombre",label:"Seleccionar las vereda a quién se le va a enviar el mensaje (Selección multiple)",class:"q-ma-md","use-input":"","use-chips":"",multiple:"","input-debounce":"0"},null,8,["modelValue","options"]),(0,o.Wm)(f,{modelValue:e.saludo,"onUpdate:modelValue":a[2]||(a[2]=a=>e.saludo=a),label:"Agregar el saludo y el nombre del seguidor"},null,8,["modelValue"]),(0,o.Wm)(f,{modelValue:e.despedida,"onUpdate:modelValue":a[3]||(a[3]=a=>e.despedida=a),label:"Agregar despedida y firma del alcalde"},null,8,["modelValue"]),(0,o.Wm)(v,{modelValue:e.mensaje,"onUpdate:modelValue":a[4]||(a[4]=a=>e.mensaje=a),filled:"",dense:e.dense,class:"q-ma-md",label:"Mensaje",type:"textarea",onBlur:e.getSeguidor},null,8,["modelValue","dense","onBlur"]),(0,o.Wm)(w,{url:"http://localhost:3000/upload",color:"teal",flat:"",bordered:"",class:"q-ma-md",style:{width:"95%"},accept:"image/*",label:"Seleccione la imágen a cargar (Maximo 2 megas)","max-file-size":"2048000","auto-upload":"",onUploaded:e.uploaded},null,8,["onUploaded"]),(0,o.Wm)(y,{color:"primary",label:"Crear Mensaje",class:"q-ma-md",onClick:e.crearmensaje},null,8,["onClick"])])),_:1})]),(0,o._)("div",u,[(0,o._)("div",m,[c,(0,o.wy)((0,o._)("span",null,(0,s.zw)(e.saludoText),513),[[n.F8,1==e.saludo]]),(0,o._)("span",null,(0,s.zw)(e.mensaje),1),(0,o.wy)((0,o._)("div",{style:{"margin-top":"10px","white-space":"pre-line"}},(0,s.zw)(e.despedidaText),513),[[n.F8,e.despedida]])])])])])}var g=l(499),h=l(9302),v=l(4136);const b=(0,o.aZ)({name:"RegistroPage",setup(){const e=h.Z,a=(0,g.iH)(null),l=(0,g.iH)([]),o=(0,g.iH)(null),s=(0,g.iH)(!1),n=(0,g.iH)("Hola {{ nombre_seguidor }}, "),t=(0,g.iH)(!0),d=(0,g.iH)(null),i=(0,g.iH)("Cordialmente, \n\r\n\rJavier Montilla \n\rAlcalde de Villarrica \n\r2024-2027"),r=(0,g.iH)(!1);return{$q:e,veredas:l,vereda:a,mensaje:o,saludo:s,despedida:t,despedidaText:i,saludoText:n,files:[],conimagen:r,titulo:d}},mounted(){this.getVeredas(),this.deletecacheimage()},methods:{nuevo(){window.location.href="#/admin/nuevo"},deletecacheimage(){v.api.post("deletecacheimage").then((e=>{console.log(e)})).catch((e=>{console.log(e)}))},uploaded(e){e.files.length>0?this.conimagen=!0:this.conimagen=!1},onFileAdded(e){e.nombre=e.name},crearmensaje(){const e={titulo:this.titulo,saludo:this.saludo,veredas:this.vereda,mensaje:this.mensaje,despedida:this.despedida,conimagen:this.conimagen};if(null===this.titulo||""===this.titulo){const e="Es obligatorio escribir un título";return this.$q.notify({message:e,color:"red"}),!1}if(null===this.vereda||0===this.vereda.length){const e="Es obligatorio seleccionar al menos una vereda";return this.$q.notify({message:e,color:"red"}),!1}if(null===this.mensaje&&!1===this.conimagen){const e="Es necesario cargar un mensaje o una imágen, alguno de los dos";return this.$q.notify({message:e,color:"red"}),!1}v.api.post("saveMensaje",e).then((e=>{const a=e.data,l=a.message,o=a.data.total,s=(l+", se puso en cola de espera "+o+" mensaje(s)").toString();console.log(s),a.error||(this.$q.notify({message:l,color:"green"}),window.location.href="#/admin/mensajes")})).catch((e=>{console.log(e)}))},getVeredas(){v.api.post("getVeredas").then((e=>{const a=e.data;this.veredas=a.data.results})).catch((e=>{console.log(e)}))}}});var f=l(1639),w=l(4458),y=l(6611),j=l(6394),q=l(3175),V=l(4343),x=l(4455),_=l(9984),H=l.n(_);const Z=(0,f.Z)(b,[["render",p]]),C=Z;H()(b,"components",{QCard:w.Z,QInput:y.Z,QSelect:j.Z,QToggle:q.Z,QUploader:V.Z,QBtn:x.Z})}}]);