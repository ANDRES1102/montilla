"use strict";(globalThis["webpackChunkmontilla"]=globalThis["webpackChunkmontilla"]||[]).push([[682],{3682:(a,t,r)=>{r.r(t),r.d(t,{default:()=>k});var e=r(9835),s=r(1957),o=r(6970);const l={class:"q-pa-lg"},n=(0,e._)("div",{class:"text-h5"}," Conexión a Whatsapp ",-1),i={class:"q-ma-md"},h=["src"];function c(a,t,r,c,p,m){const u=(0,e.up)("q-table");return(0,e.wg)(),(0,e.iD)("div",l,[n,(0,e.wy)((0,e._)("div",null,[(0,e.wy)((0,e._)("div",i,[(0,e.Wm)(u,{flat:"",bordered:"",title:"Datos del dispositivo conectado",rows:a.rows,columns:a.columns,"row-key":"name"},null,8,["rows","columns"])],512),[[s.F8,a.dataUser]])],512),[[s.F8,!a.qr]]),(0,e.wy)((0,e._)("div",null,[(0,e.wy)((0,e._)("div",null," Aún estamos preparando Whatsaspp, espere unos momentos ",512),[[s.F8,a.whqr]]),(0,e.wy)((0,e._)("div",null,[(0,e._)("img",{src:a.qrText,alt:""},null,8,h)],512),[[s.F8,!a.whqr]])],512),[[s.F8,a.qr]]),(0,e.wy)((0,e._)("div",null,[(0,e._)("div",null,(0,o.zw)(a.mensajeError),1)],512),[[s.F8,!a.qr]])])}var p=r(499),m=r(4136),u=r(9302),d=r(2316);const w=[{name:"celular",required:!0,label:"Celular Whatsapp",align:"left",field:"celular",sortable:!0},{name:"nombres",align:"center",label:"Nombres",field:"nombres",sortable:!0},{name:"Plataforma",label:"Plataforma",field:"plataforma",sortable:!0}],g=(0,e.aZ)({name:"ColaboradoresPage",setup(){const a=u.Z,t=(0,p.iH)(!0),r=(0,p.iH)(!1),e=(0,p.iH)(!1),s=(0,p.iH)(""),o=(0,p.iH)(""),l=(0,p.iH)(!1),n=(0,p.iH)([]);return{$q:a,recargarwh:t,qr:r,whqr:e,qrText:s,mensajeError:o,dataUser:l,rows:n,columns:w}},mounted(){this.startWhatsapp()},methods:{cerrarsesion(){m.api.post("logout").then((a=>{console.log(a),this.recargarwh=!0,this.qr=!1,this.whqr=!1,this.dataUser=!1})).catch((a=>{console.log(a)}))},startWhatsapp(){m.api.post("initWhatsapp").then((a=>{const t=a.data;try{if("c.us"===t.client.me.server){console.log(t);const a={nombres:t.client.pushname,plataforma:t.client.platform,celular:t.client.me.user};this.rows.push(a),this.recargarwh=!1,this.dataUser=!0}}catch(r){console.log(r)}this.recargarwh&&(this.initWhatsapp(),t.status?(this.whqr=!1,this.qr=!0,this.qrText=t.data,d.toDataURL(t.data,{errorCorrectionLevel:"H"}).then((a=>{this.qrText=a})).catch((a=>{console.error(a)})),console.log("okkk")):(this.whqr=!0,this.mensajeError="Se ha producido un error: "+t.message))})).catch((a=>{console.log(a,"catch"),this.recargarwh&&this.initWhatsapp()}))},initWhatsapp(){setTimeout((()=>{this.startWhatsapp()}),5e3)}}});var q=r(1639),b=r(4455),v=r(7580),f=r(9984),W=r.n(f);const _=(0,q.Z)(g,[["render",c]]),k=_;W()(g,"components",{QBtn:b.Z,QTable:v.Z})}}]);