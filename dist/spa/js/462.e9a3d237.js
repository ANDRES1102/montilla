"use strict";(globalThis["webpackChunkmontilla"]=globalThis["webpackChunkmontilla"]||[]).push([[462],{5462:(e,a,l)=>{l.r(a),l.d(a,{default:()=>N});var o=l(9835),t=l(6970),s=l(1957);const r=(0,o._)("img",{src:"https://cdn.quasar.dev/logo-v2/svg/logo-mono-white.svg"},null,-1),n=(0,o._)("div",{class:"text-h6"}," Cambiar Contraseña ",-1),i=(0,o._)("div",null," Cambia la contraseña por una diferente a la actual ",-1);function u(e,a,l,u,d,c){const p=(0,o.up)("q-btn"),m=(0,o.up)("q-avatar"),w=(0,o.up)("q-toolbar-title"),g=(0,o.up)("q-toolbar"),h=(0,o.up)("q-header"),b=(0,o.up)("q-icon"),f=(0,o.up)("q-item-section"),v=(0,o.up)("q-item"),k=(0,o.up)("q-separator"),q=(0,o.up)("q-list"),C=(0,o.up)("q-scroll-area"),W=(0,o.up)("q-drawer"),Z=(0,o.up)("router-view"),_=(0,o.up)("q-page-container"),Q=(0,o.up)("q-card-section"),y=(0,o.up)("q-input"),V=(0,o.up)("q-card-actions"),S=(0,o.up)("q-card"),I=(0,o.up)("q-dialog"),D=(0,o.up)("q-layout"),H=(0,o.Q2)("ripple"),j=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(D,{view:"hHh lpR fFf"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{elevated:"",class:"bg-primary text-white"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{dense:"",flat:"",round:"",icon:"menu",onClick:u.toggleLeftDrawer},null,8,["onClick"]),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Uk)(" Montilla Alcalde ")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(W,{"show-if-above":"",modelValue:u.leftDrawerOpen,"onUpdate:modelValue":a[0]||(a[0]=e=>u.leftDrawerOpen=e),side:"left",bordered:""},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{class:"fit"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.menuList,((e,a)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:a},[(0,o.wy)(((0,o.wg)(),(0,o.j4)(v,{clickable:"",active:"Outbox"===e.label,to:e.to,onClick:a=>c.click(e.click)},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{name:e.icon},null,8,["name"])])),_:2},1024),(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.label),1)])),_:2},1024)])),_:2},1032,["active","to","onClick"])),[[H]]),e.separator?((0,o.wg)(),(0,o.j4)(k,{key:"sep"+a})):(0,o.kq)("",!0)],64)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Z)])),_:1}),(0,o.Wm)(I,{modelValue:u.inception,"onUpdate:modelValue":a[4]||(a[4]=e=>u.inception=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Q,null,{default:(0,o.w5)((()=>[n,i])),_:1}),(0,o.Wm)(Q,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{outlined:"",modelValue:u.password,"onUpdate:modelValue":a[1]||(a[1]=e=>u.password=e),type:"password",label:"Contraseña Actual",class:"q-ma-sm","stack-label":"",dense:e.dense},null,8,["modelValue","dense"]),(0,o.Wm)(y,{outlined:"",modelValue:u.nueva,"onUpdate:modelValue":a[2]||(a[2]=e=>u.nueva=e),type:"password",label:"Contraseña Nueva","stack-label":"",class:"q-ma-sm",dense:e.dense},null,8,["modelValue","dense"]),(0,o.Wm)(y,{outlined:"",modelValue:u.repetir,"onUpdate:modelValue":a[3]||(a[3]=e=>u.repetir=e),type:"password",label:"Repetir Contraseña Nueva",class:"q-ma-sm","stack-label":"",dense:e.dense},null,8,["modelValue","dense"])])),_:1}),(0,o.wy)((0,o._)("div",{color:"red"},(0,t.zw)(e.mensajeError),513),[[s.F8,""!=e.mensajeError]]),(0,o.Wm)(V,{align:"right",class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(p,{flat:"",label:"Cancelar",color:"red",onClick:e.closeRegistroColaboradores},null,8,["onClick"]),[[j]]),(0,o.Wm)(p,{flat:"",label:"Cambiar Contraseña",onClick:c.cambiarpassword},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var d=l(499),c=l(4136),p=l(9302);l(6827);const m=[{icon:"sms",label:"Whatsapp",separator:!1,to:"/admin/whatsapp",click:"whatsapp"},{icon:"add",label:"Colaboradores",separator:!1,to:"/admin/colaboradores",click:"colaboradores"},{icon:"group_add",label:"Registrar Seguidores",separator:!1,to:"/admin/registro",click:"seguidores"},{icon:"send",label:"Mensajes",separator:!0,to:"/admin/mensajes",click:"mensajes"},{icon:"logout",label:"Cerrar Sesion",separator:!1,to:"/",click:"logout"}],w={setup(){const e=(0,d.iH)(!1),a=(0,d.iH)(!1),l=(0,p.Z)(),o=(0,d.iH)(null),t=(0,d.iH)(null),s=(0,d.iH)(null);return{leftDrawerOpen:e,toggleLeftDrawer(){e.value=!e.value},menuList:m,inception:a,$q:l,password:o,nueva:t,repetir:s}},mounted(){this.getInit(),this.updatePassword()},methods:{cambiarpassword(){if(null==this.password||""===this.password||null==this.nueva||""===this.nueva||null==this.repetir||""===this.repetir)return this.$q.notify({message:"Todos los datos son obligatorios",color:"red"}),!1;if(this.nueva!==this.repetir)return this.$q.notify({message:"La contraseña nueva no coincide con la contraseña a repetir",color:"red"}),!1;const e=localStorage.getItem("user"),a=JSON.parse(e),l={cedula:a.cedula,password:this.password,nueva:this.nueva,repetir:this.repetir};c.api.post("changepassword",l).then((e=>{console.log(e);const a=e.data,l=a.message;a.error?this.$q.notify({message:l,color:"red"}):(this.$q.notify({message:l,color:"green"}),this.password=null,this.nueva=null,this.repetir=null,this.inception=!1)})).catch((e=>{console.log(e)}))},updatePassword(){const e=localStorage.getItem("user"),a=JSON.parse(e),l={cedula:a.cedula};c.api.post("validatepassword",l).then((e=>{const a=e.data;a.error||(console.log("cambiar contraseña"),this.inception=!0)})).catch((e=>{console.log(e)}))},click(e){switch(e){case"logout":localStorage.removeItem("user");break}},getInit(){const e=this.$route.path,a=JSON.parse(localStorage.getItem("user")),l=a.role;"admin"!==l&&e.includes("admin")&&(window.location.href="#/colaborador/registro")}}};var g=l(1639),h=l(249),b=l(6602),f=l(1663),v=l(4455),k=l(1973),q=l(1357),C=l(906),W=l(6663),Z=l(3246),_=l(490),Q=l(1233),y=l(2857),V=l(926),S=l(2133),I=l(2074),D=l(4458),H=l(3190),j=l(6611),L=l(1821),O=l(1136),U=l(2146),T=l(9984),$=l.n(T);const A=(0,g.Z)(w,[["render",u]]),N=A;$()(w,"components",{QLayout:h.Z,QHeader:b.Z,QToolbar:f.Z,QBtn:v.Z,QToolbarTitle:k.Z,QAvatar:q.Z,QDrawer:C.Z,QScrollArea:W.Z,QList:Z.Z,QItem:_.Z,QItemSection:Q.Z,QIcon:y.Z,QSeparator:V.Z,QPageContainer:S.Z,QDialog:I.Z,QCard:D.Z,QCardSection:H.Z,QInput:j.Z,QCardActions:L.Z}),$()(w,"directives",{Ripple:O.Z,ClosePopup:U.Z})}}]);